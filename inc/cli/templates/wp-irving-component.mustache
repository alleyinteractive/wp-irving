<?php
/**
 * Class file for the {{label}} component.
 *
 * @package {{package}}
 */

namespace {{namespace}}\Component;

/**
 * Defines the {{label}} component.
 */
class {{class}} extends \WP_Irving\Component\Component {

	/**
	 * Unique component slug.
	 *
	 * @var string
	 */
	public $name = '{{slug}}';

	/**
	 * Label for FM fields.
	 *
	 * @var string
	 */
	public $label = '{{label}}';

	/**
	 * Define a default config shape.
	 *
	 * @return array Default config.
	 */
	public function default_config() {
		return [
			{{#fields}}
			'{{slug}}' => {{default_value}},
			{{/fields}}
		];
	}

	/**
	 * Component Fieldmanager fields.
	 *
	 * @return array Fieldmanager fields.
	 */
	public function get_fm_fields() {
		return [
			{{#fields}}
			'{{slug}}' => new \{{fm_field}}( __( '{{label}}', '{{domain}}' ) ),
			{{/fields}}
		];
	}

	/**
	 * Parse data from a saved FM field.
	 *
	 * @param array $fm_data Array of FM data for this component.
	 * @return {{class}} Instance of this class.
	 */
	public function parse_from_fm_data( array $fm_data ) : self {
		{{#fields}}
		$this->set_config( '{{slug}}', $fm_data['{{slug}}'] ?? '' );
		{{/fields}}

		return $this;
	}
}
